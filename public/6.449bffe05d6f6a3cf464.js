(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"1c7N":function(t,e,c){"use strict";c.r(e),c.d(e,"PublicModule",(function(){return U}));var i=c("SVse"),n=c("s7LF"),s=c("iInd"),a=c("8Y7J"),r=c("Gyf/"),o=c("TGE+"),b=c("zHaW");function l(t,e){1&t&&(a.Rb(0,"h5",9),a.Rb(1,"span",10),a.tc(2," Cargando... "),a.Qb(),a.Qb())}function d(t,e){if(1&t&&(a.Rb(0,"div"),a.Rb(1,"p",11),a.tc(2," \xa1Bienvenido! Usted esta por sacar un turno para ser atendido en "),a.Qb(),a.Rb(3,"div",12),a.Rb(4,"p",13),a.tc(5),a.Qb(),a.Rb(6,"p",14),a.tc(7),a.Qb(),a.Qb(),a.Qb()),2&t){const t=a.ac(2);a.zb(5),a.vc(" ",t.ticketsService.companyData.tx_company_name," "),a.zb(2),a.xc(" ",t.ticketsService.companyData.tx_address_street," ",t.ticketsService.companyData.tx_address_number," ",t.ticketsService.companyData.cd_city," ")}}function u(t,e){if(1&t){const t=a.Sb();a.Rb(0,"button",15),a.Yb("click",(function(){a.mc(t);const c=e.$implicit;return a.ac(2).nuevoTicket(c._id,c.cd_skill)})),a.tc(1),a.Qb()}if(2&t){const t=e.$implicit;a.zb(1),a.vc(" ",t.tx_skill," ")}}function m(t,e){if(1&t){const t=a.Sb();a.Rb(0,"div"),a.sc(1,l,3,0,"h5",5),a.sc(2,d,8,4,"div",4),a.sc(3,u,2,1,"button",6),a.Rb(4,"button",7),a.tc(5,"Pantalla"),a.Qb(),a.Rb(6,"button",8),a.Yb("click",(function(){return a.mc(t),a.ac().salir()})),a.tc(7,"Salir"),a.Qb(),a.Qb()}if(2&t){const t=a.ac();a.zb(1),a.fc("ngIf",t.loading),a.zb(1),a.fc("ngIf",!t.loading),a.zb(1),a.fc("ngForOf",t.skills)}}let p=(()=>{class t{constructor(t,e,c,i){this.wsService=t,this.ticketsService=e,this.router=c,this.snack=i,this.loading=!1}ngOnInit(){this.ticketsService.myTicket?(this.snack.open("Usted ya tiene un turno!",null,{duration:5e3}),this.router.navigate(["/public/screen"])):this.ticketsService.companyData?this.ticketsService.readSkills(this.ticketsService.companyData._id).subscribe(t=>{this.skills=t.skills}):(this.snack.open("Por favor ingrese una empresa primero.",null,{duration:5e3}),this.router.navigate(["/public"]))}nuevoTicket(t,e){this.loading=!0,this.ticketsService.nuevoTicket(this.ticketsService.companyData._id,t,e,this.wsService.idSocket).subscribe(t=>{t.ok&&(localStorage.setItem("ticket",JSON.stringify(t.ticket)),this.ticketsService.myTicket=t.ticket,this.loading=!1,this.router.navigate(["/public/screen"]))})}salir(){localStorage.getItem("company")&&localStorage.removeItem("company"),this.router.navigate(["/public"])}}return t.\u0275fac=function(e){return new(e||t)(a.Lb(r.a),a.Lb(o.a),a.Lb(s.b),a.Lb(b.a))},t.\u0275cmp=a.Fb({type:t,selectors:[["app-tickets"]],decls:6,vars:1,consts:[[1,"turno-container","p-2",2,"text-align","-webkit-center"],[1,"card","bg-light","mb-3",2,"min-width","18rem","max-width","30rem"],[1,"card-header"],[1,"card-body"],[4,"ngIf"],["class","card-title",4,"ngIf"],["class","btn btn-primary btn-block btn-lg",3,"click",4,"ngFor","ngForOf"],["routerLink","/public/screen",1,"btn","btn-info","btn-lg","btn-block"],[1,"btn","btn-danger","btn-block","btn-lg",3,"click"],[1,"card-title"],["id","lblNuevoTicket"],[1,"lead"],[1,"card","border-success","py-4","my-4"],[1,"text-company"],[2,"color","darkblue","font-size","1rem","font-weight","400"],[1,"btn","btn-primary","btn-block","btn-lg",3,"click"]],template:function(t,e){1&t&&(a.Rb(0,"div",0),a.Rb(1,"div",1),a.Rb(2,"div",2),a.tc(3,"OBTENER TURNO"),a.Qb(),a.Rb(4,"div",3),a.sc(5,m,8,3,"div",4),a.Qb(),a.Qb(),a.Qb()),2&t&&(a.zb(5),a.fc("ngIf",e.ticketsService.companyData))},directives:[i.j,i.i,s.c],styles:[".turno-container[_ngcontent-%COMP%]{max-width:100%;height:100%;justify-content:center;text-align:center;background-color:#fff}"]}),t})();var k=c("qfBg"),v=c("Tj54");function f(t,e){if(1&t&&(a.Rb(0,"div"),a.Rb(1,"span",9),a.tc(2),a.Qb(),a.Qb()),2&t){const t=a.ac(2);a.zb(2),a.wc(" ",null==t.ticketsService.myTicket?null:t.ticketsService.myTicket.cd_skill," ",null==t.ticketsService.myTicket?null:t.ticketsService.myTicket.id_ticket," ")}}function g(t,e){if(1&t&&(a.Rb(0,"div",17),a.Rb(1,"div",18),a.Rb(2,"div",19),a.tc(3," Por favor pase por el escritorio "),a.Qb(),a.Qb(),a.Rb(4,"div",18),a.Rb(5,"div",20),a.tc(6),a.Qb(),a.Qb(),a.Qb()),2&t){const t=a.ac(2);a.zb(6),a.vc(" ",null==t.ticketsService.myTicket?null:t.ticketsService.myTicket.cd_desk," ")}}function h(t,e){1&t&&(a.Rb(0,"div",17),a.Rb(1,"div",21),a.Rb(2,"div",22),a.tc(3,"Su turno ha finalizado"),a.Qb(),a.Qb(),a.Qb())}function y(t,e){if(1&t&&(a.Rb(0,"div",13),a.Rb(1,"div",7),a.tc(2,"SU TURNO"),a.Qb(),a.Rb(3,"div",14),a.sc(4,f,3,2,"div",15),a.sc(5,g,7,1,"div",16),a.sc(6,h,4,0,"div",16),a.Qb(),a.Qb()),2&t){const t=a.ac();a.zb(4),a.fc("ngIf",!(null!=t.ticketsService.myTicket&&t.ticketsService.myTicket.id_desk)),a.zb(1),a.fc("ngIf",null==t.ticketsService.myTicket?null:t.ticketsService.myTicket.id_desk),a.zb(1),a.fc("ngIf",!t.ticketsService.myTicket&&t.ticketsService.myTicket_end)}}function S(t,e){if(1&t){const t=a.Sb();a.Rb(0,"span",23),a.Yb("click",(function(){return a.mc(t),a.ac().cancelTicket()})),a.tc(1,"Cancelar Turno"),a.Qb()}}function R(t,e){if(1&t){const t=a.Sb();a.Rb(0,"span",24),a.Yb("click",(function(){return a.mc(t),a.ac().enCamino()})),a.tc(1,"en camino"),a.Qb()}}function Q(t,e){1&t&&(a.Rb(0,"div",25),a.Rb(1,"div",26),a.Rb(2,"span"),a.tc(3,"espere..."),a.Qb(),a.Qb(),a.Qb())}function x(t,e){1&t&&(a.Rb(0,"span",33),a.Rb(1,"mat-icon"),a.tc(2,"check"),a.Qb(),a.Qb())}function T(t,e){if(1&t&&(a.Rb(0,"tr"),a.Rb(1,"td",30),a.tc(2),a.Qb(),a.Rb(3,"td",31),a.sc(4,x,3,0,"span",32),a.Qb(),a.Rb(5,"td",30),a.tc(6),a.Qb(),a.Qb()),2&t){const t=e.$implicit;a.zb(2),a.wc(" ",t.cd_skill,"",t.id_ticket,""),a.zb(2),a.fc("ngIf",t.tm_end),a.zb(2),a.uc(t.cd_desk)}}function w(t,e){if(1&t&&(a.Rb(0,"div",27),a.Rb(1,"table",28),a.Rb(2,"tr"),a.Rb(3,"td"),a.tc(4," Turno "),a.Qb(),a.Mb(5,"td"),a.Rb(6,"td"),a.tc(7," Escritorio "),a.Qb(),a.Qb(),a.sc(8,T,7,4,"tr",29),a.Qb(),a.Qb()),2&t){const t=a.ac();a.zb(8),a.fc("ngForOf",t.ticketsService.ticketsTail)}}let _=(()=>{class t{constructor(t,e,c,i,n){this.wsService=t,this.ticketsService=e,this.userService=c,this.snack=i,this.router=n,this.loading=!1,this.coming=!1,this.publicMode=!1}ngOnInit(){this.coming=!1,document.getElementsByTagName("body")[0].classList.remove("container"),this.userService.usuario||(this.ticketsService.companyData||(this.router.navigate(["/public"]),this.snack.open("Por favor ingrese una empresa primero!",null,{duration:5e3})),this.publicMode=!0),this.ticketsService.getTickets()}toggle(t){t.toggle()}enCamino(){this.coming=!0,this.wsService.emit("cliente-en-camino",this.ticketsService.myTicket.id_socket_desk)}cancelTicket(){this.snack.open("Desea cancelar el turno?","SI, CANCELAR",{duration:5e3}).afterDismissed().subscribe(t=>{t.dismissedByAction&&this.ticketsService.cancelTicket(this.ticketsService.myTicket._id).subscribe(t=>{t.ok&&(this.snack.open(t.msg,"ACEPTAR",{duration:5e3}),this.ticketsService.clearPublicSession(),this.router.navigate(["/public"]))})})}}return t.\u0275fac=function(e){return new(e||t)(a.Lb(r.a),a.Lb(o.a),a.Lb(k.a),a.Lb(b.a),a.Lb(s.b))},t.\u0275cmp=a.Fb({type:t,selectors:[["app-screen"]],decls:20,vars:7,consts:[[1,"row","p-3"],[1,"col-md-6"],["class","card text-white bg-success mb-4",4,"ngIf"],[1,"text-center","mb-4"],["class","btn btn-danger text-uppercase m-2",3,"click",4,"ngIf"],["class","btn btn-success text-uppercase m-2",3,"click",4,"ngIf"],[1,"card","text-white","bg-danger","mb-4"],[1,"card-header","banner-title"],[1,"banner-content",2,"background-color","rgb(141, 51, 51)"],[1,"xxxxl"],[1,"card","text-white","bg-primary","mb-4"],["class","rounded d-flex banner-content","style","background-color: rgb(54, 77, 194)",4,"ngIf"],["class","card-body card-tickets-info table-responsive-sm","style","background-color: rgb(54, 77, 194)",4,"ngIf"],[1,"card","text-white","bg-success","mb-4"],[1,"banner-content",2,"background-color","rgb(51, 141, 51)"],[4,"ngIf"],["class","banner-content",4,"ngIf"],[1,"banner-content"],[1,"row"],[1,"col"],[1,"col","xxxxl"],[1,"container"],[1,"text-white","my-4","py-2"],[1,"btn","btn-danger","text-uppercase","m-2",3,"click"],[1,"btn","btn-success","text-uppercase","m-2",3,"click"],[1,"rounded","d-flex","banner-content",2,"background-color","rgb(54, 77, 194)"],[1,"d-flex","justify-content-center","text-white","banner-title",2,"width","100%"],[1,"card-body","card-tickets-info","table-responsive-sm",2,"background-color","rgb(54, 77, 194)"],[1,"table","table","text-white","text-center",2,"font-size","x-large"],[4,"ngFor","ngForOf"],[2,"text-align","center","width","50%"],[2,"padding","0","vertical-align","middle"],["style","color: greenyellow",4,"ngIf"],[2,"color","greenyellow"]],template:function(t,e){1&t&&(a.Rb(0,"div",0),a.Rb(1,"div",1),a.sc(2,y,7,3,"div",2),a.Rb(3,"div",3),a.sc(4,S,2,0,"span",4),a.sc(5,R,2,0,"span",5),a.Qb(),a.Rb(6,"div",6),a.Rb(7,"div",7),a.tc(8,"ULTIMO TURNO"),a.Qb(),a.Rb(9,"div",8),a.Rb(10,"div"),a.Rb(11,"span",9),a.tc(12),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Mb(13,"div"),a.Qb(),a.Rb(14,"div",1),a.Rb(15,"div",10),a.Rb(16,"div",7),a.tc(17,"HISTORIAL DE LLAMADOS"),a.Qb(),a.sc(18,Q,4,0,"div",11),a.sc(19,w,9,1,"div",12),a.Qb(),a.Qb(),a.Qb()),2&t&&(a.zb(2),a.fc("ngIf",e.ticketsService.myTicket),a.zb(2),a.fc("ngIf",e.ticketsService.myTicket),a.zb(1),a.fc("ngIf",(null==e.ticketsService.myTicket?null:e.ticketsService.myTicket.id_desk)&&!e.coming),a.zb(7),a.wc(" ",null==e.ticketsService.lastTicket?null:e.ticketsService.lastTicket.cd_skill," ",null==e.ticketsService.lastTicket?null:e.ticketsService.lastTicket.id_ticket," "),a.zb(6),a.fc("ngIf",0===e.ticketsService.ticketsTail.length),a.zb(1),a.fc("ngIf",e.ticketsService.ticketsTail.length>0))},directives:[i.j,i.i,v.a],styles:[".example-button-container[_ngcontent-%COMP%]{display:flex;justify-content:right;width:120px}"]}),t})();var I=c("Q2Ze"),z=c("e6WT"),C=c("vrAh"),L=c("UhP/");function O(t,e){if(1&t&&(a.Rb(0,"mat-option",16),a.tc(1),a.Qb()),2&t){const t=e.$implicit;a.fc("value",t),a.zb(1),a.vc(" ",t.tx_company_name," ")}}function A(t,e){if(1&t){const t=a.Sb();a.Rb(0,"div",3),a.Rb(1,"h1",4),a.tc(2,"Ingrese la empresa"),a.Qb(),a.Rb(3,"p",5),a.tc(4," Puede utilizar el buscador o ingresar directamente a la empresa ingresando a su web p\xfablica por ejemplo:"),a.Mb(5,"br"),a.Rb(6,"b"),a.tc(7,"webturnos.herokuapp.com/public/suempresa"),a.Qb(),a.Qb(),a.Mb(8,"hr",6),a.Rb(9,"div",7),a.Rb(10,"mat-form-field",8),a.Rb(11,"mat-label"),a.tc(12,"Ingrese la empresa"),a.Qb(),a.Rb(13,"input",9,10),a.Yb("keyup",(function(){a.mc(t);const e=a.lc(14);return a.ac().findCompany(e)})),a.Qb(),a.Rb(15,"span",11),a.Mb(16,"i",12),a.Qb(),a.Qb(),a.Rb(17,"mat-autocomplete",13,14),a.Yb("optionSelected",(function(e){return a.mc(t),a.ac().setCompany(e.option.value)})),a.sc(19,O,2,2,"mat-option",15),a.Qb(),a.Qb(),a.Qb()}if(2&t){const t=a.lc(18),e=a.ac();a.zb(13),a.fc("matAutocomplete",t)("value",null==e.companySelected?null:e.companySelected.tx_company_name),a.zb(6),a.fc("ngForOf",e.companies)}}function j(t,e){if(1&t){const t=a.Sb();a.Rb(0,"div",3),a.Rb(1,"p",17),a.tc(2," Usted esta por ir hacia la recepci\xf3n de turnos de "),a.Qb(),a.Rb(3,"div",18),a.Rb(4,"p",19),a.tc(5),a.Qb(),a.Rb(6,"p",20),a.tc(7),a.Qb(),a.Qb(),a.Rb(8,"button",21),a.Yb("click",(function(){return a.mc(t),a.ac().goToCompany()})),a.tc(9),a.Qb(),a.Rb(10,"button",22),a.Yb("click",(function(){return a.mc(t),a.ac().companySelected=null})),a.tc(11," Volver "),a.Qb(),a.Qb()}if(2&t){const t=a.ac();a.zb(5),a.vc(" ",t.companySelected.tx_company_name," "),a.zb(2),a.xc(" ",t.companySelected.tx_address_street," ",t.companySelected.tx_address_number," ",t.companySelected.cd_city," "),a.zb(2),a.vc("Ir hacia ",t.companySelected.tx_company_name," ")}}let D=(()=>{class t{constructor(t,e,c,i){this.router=t,this.ticketsService=e,this.wsService=c,this.snack=i,this.companies=[]}ngOnInit(){}ngAfterViewInit(){document.getElementById("inputCompany").focus()}findCompany(t){t.value.length>1&&this.ticketsService.findCompany(t.value).subscribe(e=>{e.ok?this.companies=e.companies:(t.value="",this.snack.open("No existen resultados.",null,{duration:1e3}))},()=>{this.snack.open("Ocurrio un error al buscar la empresa",null,{duration:2e3})})}goToCompany(){this.companySelected&&(this.wsService.emit("enterCompany",this.companySelected._id),this.router.navigate(["/public/",this.companySelected.tx_public_name]))}setCompany(t){this.companySelected=t}}return t.\u0275fac=function(e){return new(e||t)(a.Lb(s.b),a.Lb(o.a),a.Lb(r.a),a.Lb(b.a))},t.\u0275cmp=a.Fb({type:t,selectors:[["app-search"]],decls:4,vars:2,consts:[[1,"turno-container","p-2",2,"text-align","-webkit-center"],[1,"card","bg-light","mb-3",2,"min-width","18rem","max-width","30rem"],["class","jumbotron m-2",4,"ngIf"],[1,"jumbotron","m-2"],[1,"display-4"],[1,"p-3",2,"background-color","whitesmoke","border-radius",".2rem"],[1,"my-4"],[1,"my-2"],["color","warn","appearance","fill","logincss","",1,"w-100"],["id","inputCompany","matInput","","placeholder","Empresa S.A.",3,"matAutocomplete","value","keyup"],["inputCompany",""],[1,"input-icon"],[1,"mdi","mdi-close"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"lead"],[1,"card","border-success","py-4","my-4"],[1,"text-company"],[2,"color","darkblue","font-size","1rem","font-weight","400"],[1,"btn","btn-success","btn-lg","btn-block",3,"click"],[1,"btn","btn-danger","btn-lg","btn-block",3,"click"]],template:function(t,e){1&t&&(a.Rb(0,"div",0),a.Rb(1,"div",1),a.sc(2,A,20,3,"div",2),a.sc(3,j,12,5,"div",2),a.Qb(),a.Qb()),2&t&&(a.zb(2),a.fc("ngIf",!e.companySelected),a.zb(1),a.fc("ngIf",e.companySelected))},directives:[i.j,I.c,I.f,z.a,C.c,C.a,i.i,L.h],styles:[""]}),t})();var F=c("AIE+");const M=[{path:"tickets",component:p},{path:"screen",component:_},{path:"",component:D},{path:":userCompanyName",component:c("R44i").a},{path:"**",component:F.a}];let E=(()=>{class t{}return t.\u0275mod=a.Jb({type:t}),t.\u0275inj=a.Ib({factory:function(e){return new(e||t)},imports:[[s.e.forChild(M)],s.e]}),t})();var N=c("1+r1"),P=c("j1ZV");let U=(()=>{class t{}return t.\u0275mod=a.Jb({type:t}),t.\u0275inj=a.Ib({factory:function(e){return new(e||t)},imports:[[i.b,n.o,n.g,N.a,P.a,E]]}),t})()}}]);