(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{bkV9:function(e,t,s){"use strict";s.r(t),s.d(t,"UserModule",(function(){return M}));var i=s("SVse"),n=s("s7LF"),a=s("iInd"),r=s("8Y7J");let l=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Fb({type:e,selectors:[["app-home-user"]],decls:4,vars:0,consts:[[1,"container","animated","fadeIn"],[1,"row"],[1,"col"]],template:function(e,t){1&e&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"div",2),r.rc(3," Bienvenido "),r.Pb(),r.Pb(),r.Pb())},styles:[""]}),e})();var o=s("AIE+");let c=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Fb({type:e,selectors:[["app-dashboard"]],decls:4,vars:0,consts:[[1,"container","animated","fadeIn"],[1,"row"],[1,"col"]],template:function(e,t){1&e&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"div",2),r.rc(3," Dashboard "),r.Pb(),r.Pb(),r.Pb())},styles:[""]}),e})();var d=s("qfBg"),b=s("zHaW"),u=s("Q2Ze"),p=s("e6WT");let m=(()=>{class e{constructor(e,t){this.userService=e,this.snack=t,this.desktopCreated=new r.n}ngOnInit(){this.forma=new n.e({idDesktop:new n.c(null,n.p.required),idType:new n.c(null)})}createDesktop(e){this.forma.invalid||this.userService.createDesktop({id_company:this.userService.usuario.id_company,id_desktop:this.forma.value.idDesktop,id_assistant:null,__v:null,_id:null}).subscribe(t=>{console.log(t),this.desktopCreated.emit(t.desktop),this.snack.open(t.msg,null,{duration:5e3}),this.forma.reset(),e.resetForm()},e=>{this.snack.open(e.error.msg,null,{duration:5e3})})}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(d.a),r.Lb(b.a))},e.\u0275cmp=r.Fb({type:e,selectors:[["app-desktop-create-form"]],outputs:{desktopCreated:"desktopCreated"},decls:9,vars:1,consts:[["autocomplete","off","ngNativeValidate","",2,"color","brown",3,"formGroup","ngSubmit"],["formDirective","ngForm"],["color","warn","appearance","fill",1,"w-100"],["matInput","","placeholder","Id Escritorio","formControlName","idDesktop","name","idDesktop","type","text","required",""],[1,"form-group","text-center"],["type","submit",1,"btn","btn-success","btn-block","text-uppercase","waves-effect","waves-light"]],template:function(e,t){if(1&e){const e=r.Rb();r.Qb(0,"form",0,1),r.Xb("ngSubmit",(function(){r.kc(e);const s=r.jc(1);return t.createDesktop(s)})),r.Qb(2,"mat-form-field",2),r.Qb(3,"mat-label"),r.rc(4,"Identificador"),r.Pb(),r.Mb(5,"input",3),r.Pb(),r.Qb(6,"div",4),r.Qb(7,"button",5),r.rc(8,"Alta de Ventanilla"),r.Pb(),r.Pb(),r.Pb()}2&e&&r.ec("formGroup",t.forma)},directives:[n.k,n.f,u.a,u.d,p.a,n.b,n.j,n.d,n.o],styles:[""]}),e})();var f=s("Tj54");function k(e,t){if(1&e){const e=r.Rb();r.Qb(0,"div",9),r.Qb(1,"span"),r.rc(2),r.Pb(),r.Qb(3,"span",10),r.Qb(4,"mat-icon",11),r.Xb("click",(function(){r.kc(e);const s=t.$implicit;return r.Zb().editDesktop(s._id)})),r.rc(5,"edit"),r.Pb(),r.Qb(6,"mat-icon",12),r.Xb("click",(function(){r.kc(e);const s=t.$implicit;return r.Zb().deleteDesktop(s._id)})),r.rc(7,"delete"),r.Pb(),r.Pb(),r.Pb()}if(2&e){const e=t.$implicit;r.zb(2),r.sc(null==e?null:e.id_desktop)}}let h=(()=>{class e{constructor(e,t){this.userService=e,this.snack=t}ngOnInit(){this.userService.readDesktops(this.userService.usuario.id_company).subscribe(e=>{this.desktops=e.desktops,console.log(e)},e=>{console.log(e)})}editDesktop(e){}deleteDesktop(e){this.snack.open("Desea eliminar el escritorio?","ELIMINAR",{duration:1e4}).afterDismissed().subscribe(t=>{t.dismissedByAction&&this.userService.deleteDesktop(e).subscribe(t=>{this.snack.open(t.msg,null,{duration:5e3}),this.desktops=this.desktops.filter(t=>t._id!=e)},e=>{this.snack.open(e.msg,null,{duration:5e3})})})}desktopCreated(e){this.desktops.push(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(d.a),r.Lb(b.a))},e.\u0275cmp=r.Fb({type:e,selectors:[["app-desktops"]],decls:12,vars:1,consts:[[1,"m-4","animated","fadeIn"],[1,"card","bg-info","lead","text-white"],[1,"card-header"],[1,"card-body","card-turnos-info"],["class","my-2",4,"ngFor","ngForOf"],[1,"my-4"],[1,"card","lead"],[1,"card-body"],[3,"desktopCreated"],[1,"my-2"],[2,"float","right"],[1,"ml-2","list-crud-edit",3,"click"],[1,"ml-2","list-crud-delete",3,"click"]],template:function(e,t){1&e&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"div",2),r.rc(3,"Ventanillas"),r.Pb(),r.Qb(4,"div",3),r.qc(5,k,8,1,"div",4),r.Pb(),r.Pb(),r.Mb(6,"div",5),r.Qb(7,"div",6),r.Qb(8,"div",2),r.rc(9,"Alta de Ventanillas"),r.Pb(),r.Qb(10,"div",7),r.Qb(11,"app-desktop-create-form",8),r.Xb("desktopCreated",(function(e){return t.desktopCreated(e)})),r.Pb(),r.Pb(),r.Pb(),r.Pb()),2&e&&(r.zb(5),r.ec("ngForOf",t.desktops))},directives:[i.i,m,f.a],styles:[""]}),e})();var v=s("LRne"),g=s("SqCe");function w(e,t){if(1&e){const e=r.Rb();r.Qb(0,"mat-list-option",12),r.Xb("click",(function(){r.kc(e);const s=t.$implicit;return r.Zb().setNewSkill(s)})),r.Qb(1,"span",13),r.rc(2),r.Pb(),r.Pb()}if(2&e){const e=t.$implicit;r.ec("value",e._id),r.zb(2),r.sc(e.tx_skill)}}function P(e,t){1&e&&(r.Qb(0,"button",14),r.rc(1,"Alta de Asistente"),r.Pb())}function S(e,t){1&e&&(r.Qb(0,"button",15),r.rc(1,"Guardar Cambios "),r.Pb())}const Q=function(){return{standalone:!0}};let y=(()=>{class e{constructor(e,t){this.userService=e,this.snack=t,this.updateAssistants=new r.n,this.selStrSkills=[],this.skills=[],this.manejaError=e=>Object(v.a)(e)}ngOnInit(){this.forma=new n.e({email:new n.c(null,[n.p.required,n.p.email]),nombre:new n.c(null,n.p.required),password:new n.c(null,n.p.required),password2:new n.c(null,n.p.required),condiciones:new n.c(!1)},{validators:this.sonIguales("password","password2")}),this.userService.readSkills(this.userService.usuario.id_company).subscribe(e=>{this.skills=e.skills})}ngOnChanges(e){var t,s,i;console.log(e),null===(t=this.forma)||void 0===t||t.patchValue({email:e.assistantEdit.currentValue.tx_email,nombre:e.assistantEdit.currentValue.tx_name,password:"******",password2:"******"}),this.selStrSkills=null===(i=null===(s=e.assistantEdit)||void 0===s?void 0:s.currentValue)||void 0===i?void 0:i.id_skills}sonIguales(e,t){return s=>s.controls[e].value===s.controls[t].value?null:{password:"Las contrase\xf1as deben ser iguales"}}setNewSkill(e){console.log(e),console.log(this.selStrSkills)}createAssistant(e){if(0!==this.selStrSkills.length)if(this.forma.invalid)this.forma.errors.password&&this.snack.open(this.forma.errors.password,"ACEPTAR",{duration:5e3});else if(this.assistantEdit){const t={_id:this.assistantEdit._id,tx_name:this.forma.value.nombre,tx_email:this.forma.value.email,tx_password:this.forma.value.password,id_skills:this.selStrSkills};console.log("editando",t),this.userService.updateAssistant(t).subscribe(t=>{console.log(t),this.assistantEdit=null,this.updateAssistants.emit(t.assistant._id),this.snack.open(t.msg,null,{duration:5e3}),this.forma.reset(),e.resetForm()},e=>{this.snack.open(e.error.msg,null,{duration:5e3})})}else console.log("creando",this.forma.value),this.userService.createAssistant({tx_name:this.forma.value.nombre,tx_email:this.forma.value.email,tx_password:this.forma.value.password,id_company:this.userService.usuario.id_company,id_skills:this.selStrSkills}).subscribe(t=>{this.updateAssistants.emit(t.assistant._id),this.snack.open(t.msg,null,{duration:5e3}),this.forma.reset(),e.resetForm()},e=>{this.snack.open(e.error.msg,null,{duration:5e3})});else this.snack.open("Seleccione al menos un skill","ACEPTAR",{duration:5e3})}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(d.a),r.Lb(b.a))},e.\u0275cmp=r.Fb({type:e,selectors:[["app-assistant-create-form"]],inputs:{assistantEdit:"assistantEdit"},outputs:{updateAssistants:"updateAssistants"},features:[r.xb],decls:23,vars:7,consts:[["autocomplete","off","ngNativeValidate","",2,"color","brown",3,"formGroup","ngSubmit"],["formDirective","ngForm"],["color","warn","appearance","fill",1,"w-100"],["matInput","","placeholder","Nombre","formControlName","nombre","name","nombre","type","text","required","","placeholder","Nombre"],["matInput","","placeholder","Email","formControlName","email","name","email","type","email","required","","placeholder","Correo"],["matInput","","placeholder","Clave","formControlName","password","name","password","type","password","required","","placeholder","Contrase\xf1a","autocomplete","new-password"],["matInput","","placeholder","Clave","formControlName","password2","name","password2","type","password","required","","placeholder","Confirma contrase\xf1a","autocomplete","new-password"],[3,"ngModelOptions","ngModel","ngModelChange"],["name","selStrSkills",3,"value","click",4,"ngFor","ngForOf"],[1,"form-group","text-center"],["class","btn btn-success btn-block text-uppercase waves-effect waves-light","type","submit",4,"ngIf"],["class","btn btn-danger btn-block text-uppercase waves-effect waves-light","type","submit",4,"ngIf"],["name","selStrSkills",3,"value","click"],[1,"mat-select-option-nowarp"],["type","submit",1,"btn","btn-success","btn-block","text-uppercase","waves-effect","waves-light"],["type","submit",1,"btn","btn-danger","btn-block","text-uppercase","waves-effect","waves-light"]],template:function(e,t){if(1&e){const e=r.Rb();r.Qb(0,"form",0,1),r.Xb("ngSubmit",(function(){r.kc(e);const s=r.jc(1);return t.createAssistant(s)})),r.Qb(2,"mat-form-field",2),r.Qb(3,"mat-label"),r.rc(4,"Nombre"),r.Pb(),r.Mb(5,"input",3),r.Pb(),r.Qb(6,"mat-form-field",2),r.Qb(7,"mat-label"),r.rc(8,"Email"),r.Pb(),r.Mb(9,"input",4),r.Pb(),r.Qb(10,"mat-form-field",2),r.Qb(11,"mat-label"),r.rc(12,"Clave"),r.Pb(),r.Mb(13,"input",5),r.Pb(),r.Qb(14,"mat-form-field",2),r.Qb(15,"mat-label"),r.rc(16,"Clave"),r.Pb(),r.Mb(17,"input",6),r.Pb(),r.Qb(18,"mat-selection-list",7),r.Xb("ngModelChange",(function(e){return t.selStrSkills=e})),r.qc(19,w,3,2,"mat-list-option",8),r.Pb(),r.Qb(20,"div",9),r.qc(21,P,2,0,"button",10),r.qc(22,S,2,0,"button",11),r.Pb(),r.Pb()}2&e&&(r.ec("formGroup",t.forma),r.zb(18),r.ec("ngModelOptions",r.gc(6,Q))("ngModel",t.selStrSkills),r.zb(1),r.ec("ngForOf",t.skills),r.zb(2),r.ec("ngIf",!t.assistantEdit),r.zb(1),r.ec("ngIf",t.assistantEdit))},directives:[n.k,n.f,u.a,u.d,p.a,n.b,n.j,n.d,n.o,g.c,n.m,i.i,i.j,g.b],styles:[".mat-select-option-nowarp[_ngcontent-%COMP%]{float:left;width:-webkit-max-content;width:max-content}"]}),e})();function _(e,t){1&e&&(r.Qb(0,"span"),r.Qb(1,"mat-icon",16),r.rc(2,"check"),r.Pb(),r.Pb())}function I(e,t){if(1&e){const e=r.Rb();r.Qb(0,"div",10),r.Qb(1,"span"),r.rc(2),r.Qb(3,"span",11),r.rc(4),r.Pb(),r.Pb(),r.qc(5,_,3,0,"span",12),r.Qb(6,"span",13),r.Qb(7,"mat-icon",14),r.Xb("click",(function(){r.kc(e);const s=t.$implicit;return r.Zb().editAssistant(s)})),r.rc(8,"edit"),r.Pb(),r.Qb(9,"mat-icon",15),r.Xb("click",(function(){r.kc(e);const s=t.$implicit;return r.Zb().deleteAssistant(s._id)})),r.rc(10,"delete"),r.Pb(),r.Pb(),r.Pb()}if(2&e){const e=t.$implicit,s=r.Zb();r.zb(2),r.tc("",null==e?null:e.tx_name," "),r.zb(2),r.tc("[ ",null==e?null:e.tx_email," ]"),r.zb(1),r.ec("ngIf",e._id===s.assistantUpdated)}}let A=(()=>{class e{constructor(e,t){this.userService=e,this.snack=t}ngOnInit(){this.readAssistants()}editAssistant(e){this.assistantEdit=e}deleteAssistant(e){this.snack.open("Desea eliminar el asistente?","ELIMINAR",{duration:1e4}).afterDismissed().subscribe(t=>{t.dismissedByAction&&this.userService.deleteAssistant(e).subscribe(t=>{this.snack.open(t.msg,null,{duration:5e3}),this.assistants=this.assistants.filter(t=>t._id!=e)},e=>{this.snack.open(e.msg,null,{duration:5e3})})})}updateAssistants(e){this.assistantUpdated=e,this.readAssistants()}readAssistants(){this.userService.readAssistants(this.userService.usuario.id_company).subscribe(e=>{console.log(e),this.assistants=e.assistants},e=>{console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(d.a),r.Lb(b.a))},e.\u0275cmp=r.Fb({type:e,selectors:[["app-assistants"]],decls:12,vars:2,consts:[[1,"m-4","animated","fadeIn"],[1,"card","bg-primary","lead","text-white"],[1,"card-header"],[1,"card-body","card-turnos-primary"],["class","my-2",4,"ngFor","ngForOf"],[1,"my-4"],[1,"card","lead"],[1,"card-header","bg-success"],[1,"card-body"],[3,"assistantEdit","updateAssistants"],[1,"my-2"],[2,"font-size","small"],[4,"ngIf"],[2,"float","right"],[1,"ml-2","list-crud-edit",3,"click"],[1,"ml-2","list-crud-delete",3,"click"],[1,"ml-2","list-crud-edit"]],template:function(e,t){1&e&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"div",2),r.rc(3,"Asistentes"),r.Pb(),r.Qb(4,"div",3),r.qc(5,I,11,3,"div",4),r.Pb(),r.Pb(),r.Mb(6,"div",5),r.Qb(7,"div",6),r.Qb(8,"div",7),r.rc(9,"Alta de asistente"),r.Pb(),r.Qb(10,"div",8),r.Qb(11,"app-assistant-create-form",9),r.Xb("updateAssistants",(function(e){return t.updateAssistants(e)})),r.Pb(),r.Pb(),r.Pb(),r.Pb()),2&e&&(r.zb(5),r.ec("ngForOf",t.assistants),r.zb(6),r.ec("assistantEdit",t.assistantEdit))},directives:[i.i,y,i.j,f.a],styles:[""]}),e})(),C=(()=>{class e{constructor(e,t){this.userService=e,this.snack=t,this.skillCreated=new r.n}ngOnInit(){this.forma=new n.e({idSkill:new n.c(null,n.p.required),txSkill:new n.c(null,n.p.required)})}createSkill(e){this.forma.invalid||this.userService.createSkill({id_company:this.userService.usuario.id_company,id_skill:this.forma.value.idSkill,tx_skill:this.forma.value.txSkill,__v:null,_id:null}).subscribe(t=>{console.log(t),this.skillCreated.emit(t.skill),this.snack.open(t.msg,null,{duration:5e3}),this.forma.reset(),e.resetForm()},e=>{this.snack.open(e.error.msg,null,{duration:5e3})})}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(d.a),r.Lb(b.a))},e.\u0275cmp=r.Fb({type:e,selectors:[["app-skill-create-form"]],outputs:{skillCreated:"skillCreated"},decls:13,vars:1,consts:[["autocomplete","off","ngNativeValidate","",2,"color","brown",3,"formGroup","ngSubmit"],["formDirective","ngForm"],["color","warn","appearance","fill",1,"w-100"],["matInput","","placeholder","Id Skill","formControlName","idSkill","name","idSkill","type","text","required",""],["matInput","","placeholder","Skill","formControlName","txSkill","name","txSkill","type","text","required",""],[1,"form-group","text-center"],["type","submit",1,"btn","btn-success","btn-block","text-uppercase","waves-effect","waves-light"]],template:function(e,t){if(1&e){const e=r.Rb();r.Qb(0,"form",0,1),r.Xb("ngSubmit",(function(){r.kc(e);const s=r.jc(1);return t.createSkill(s)})),r.Qb(2,"mat-form-field",2),r.Qb(3,"mat-label"),r.rc(4,"Identificador"),r.Pb(),r.Mb(5,"input",3),r.Pb(),r.Qb(6,"mat-form-field",2),r.Qb(7,"mat-label"),r.rc(8,"Descripcion"),r.Pb(),r.Mb(9,"input",4),r.Pb(),r.Qb(10,"div",5),r.Qb(11,"button",6),r.rc(12,"Alta de Skill"),r.Pb(),r.Pb(),r.Pb()}2&e&&r.ec("formGroup",t.forma)},directives:[n.k,n.f,u.a,u.d,p.a,n.b,n.j,n.d,n.o],styles:[""]}),e})();function x(e,t){if(1&e){const e=r.Rb();r.Qb(0,"div",9),r.Qb(1,"span"),r.rc(2),r.Pb(),r.Qb(3,"span",10),r.rc(4),r.Pb(),r.Qb(5,"span",11),r.Qb(6,"mat-icon",12),r.Xb("click",(function(){r.kc(e);const s=t.$implicit;return r.Zb().editSkill(s._id)})),r.rc(7,"edit"),r.Pb(),r.Qb(8,"mat-icon",13),r.Xb("click",(function(){r.kc(e);const s=t.$implicit;return r.Zb().deleteSkill(s._id)})),r.rc(9,"delete"),r.Pb(),r.Pb(),r.Pb()}if(2&e){const e=t.$implicit;r.zb(2),r.tc(" ",null==e?null:e.id_skill," "),r.zb(2),r.tc(" [ ",null==e?null:e.tx_skill," ] ")}}const F=[{path:"home",component:l},{path:"desktops",component:h},{path:"assistants",component:A},{path:"skills",component:(()=>{class e{constructor(e,t){this.userService=e,this.snack=t}ngOnInit(){this.userService.readSkills(this.userService.usuario.id_company).subscribe(e=>{this.skills=e.skills,console.log(e)},e=>{console.log(e)})}editSkill(e){}deleteSkill(e){this.snack.open("Desea eliminar el skill?","ELIMINAR",{duration:1e4}).afterDismissed().subscribe(t=>{t.dismissedByAction&&this.userService.deleteSkill(e).subscribe(t=>{this.snack.open(t.msg,null,{duration:5e3}),this.skills=this.skills.filter(t=>t._id!=e)},e=>{this.snack.open(e.msg,null,{duration:5e3})})})}skillCreated(e){this.skills.push(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(d.a),r.Lb(b.a))},e.\u0275cmp=r.Fb({type:e,selectors:[["app-skills"]],decls:12,vars:1,consts:[[1,"m-4","animated","fadeIn"],[1,"card","bg-danger","lead","text-white"],[1,"card-header"],[1,"card-body","card-turnos-danger"],["class","my-2",4,"ngFor","ngForOf"],[1,"my-4"],[1,"card","lead"],[1,"card-body"],[3,"skillCreated"],[1,"my-2"],[2,"font-size","small"],[2,"float","right"],[1,"ml-2","list-crud-edit",3,"click"],[1,"ml-2","list-crud-delete",3,"click"]],template:function(e,t){1&e&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"div",2),r.rc(3,"Skills"),r.Pb(),r.Qb(4,"div",3),r.qc(5,x,10,2,"div",4),r.Pb(),r.Pb(),r.Mb(6,"div",5),r.Qb(7,"div",6),r.Qb(8,"div",2),r.rc(9,"Alta de Skills"),r.Pb(),r.Qb(10,"div",7),r.Qb(11,"app-skill-create-form",8),r.Xb("skillCreated",(function(e){return t.skillCreated(e)})),r.Pb(),r.Pb(),r.Pb(),r.Pb()),2&e&&(r.zb(5),r.ec("ngForOf",t.skills))},directives:[i.i,C,f.a],styles:[""]}),e})()},{path:"dashboard",component:c},{path:"",redirectTo:"/user/home",pathMatch:"full"},{path:"**",component:o.a}];let D=(()=>{class e{}return e.\u0275mod=r.Jb({type:e}),e.\u0275inj=r.Ib({factory:function(t){return new(t||e)},imports:[[a.e.forChild(F)],a.e]}),e})();var E=s("1+r1"),q=s("j1ZV");let M=(()=>{class e{}return e.\u0275mod=r.Jb({type:e}),e.\u0275inj=r.Ib({factory:function(t){return new(t||e)},imports:[[i.b,n.n,n.g,E.a,q.a,D]]}),e})()}}]);