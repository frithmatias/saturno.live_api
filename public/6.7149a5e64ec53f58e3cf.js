(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"1c7N":function(e,t,c){"use strict";c.r(t),c.d(t,"PublicModule",(function(){return N}));var i=c("SVse"),n=c("s7LF"),r=c("iInd"),o=c("8Y7J"),s=c("Gyf/"),b=c("TGE+"),a=c("zHaW");function l(e,t){1&e&&(o.Qb(0,"h5",8),o.Qb(1,"span",9),o.rc(2," Cargando... "),o.Pb(),o.Pb())}function d(e,t){if(1&e&&(o.Qb(0,"div"),o.Qb(1,"p",10),o.rc(2," \xa1Bienvenido! Usted esta por sacar un turno para ser atendido en "),o.Pb(),o.Qb(3,"div",11),o.Qb(4,"p",12),o.rc(5),o.Pb(),o.Qb(6,"p",13),o.rc(7),o.Pb(),o.Pb(),o.Pb()),2&e){const e=o.Zb(2);o.zb(5),o.tc(" ",e.ticketsService.companyData.tx_company_name," "),o.zb(2),o.vc(" ",e.ticketsService.companyData.tx_address_street," ",e.ticketsService.companyData.tx_address_number," ",e.ticketsService.companyData.cd_city," ")}}function u(e,t){if(1&e){const e=o.Rb();o.Qb(0,"button",14),o.Xb("click",(function(){o.kc(e);const c=t.$implicit;return o.Zb(2).nuevoTicket(c._id,c.cd_skill)})),o.rc(1),o.Pb()}if(2&e){const e=t.$implicit;o.zb(1),o.tc(" ",e.tx_skill," ")}}function p(e,t){if(1&e){const e=o.Rb();o.Qb(0,"div"),o.qc(1,l,3,0,"h5",5),o.qc(2,d,8,4,"div",4),o.qc(3,u,2,1,"button",6),o.Qb(4,"button",7),o.Xb("click",(function(){return o.kc(e),o.Zb().salir()})),o.rc(5,"Salir"),o.Pb(),o.Pb()}if(2&e){const e=o.Zb();o.zb(1),o.ec("ngIf",e.loading),o.zb(1),o.ec("ngIf",!e.loading),o.zb(1),o.ec("ngForOf",e.skills)}}let m=(()=>{class e{constructor(e,t,c,i){this.wsService=e,this.ticketsService=t,this.router=c,this.snack=i,this.loading=!1}ngOnInit(){this.ticketsService.myTicket?(this.snack.open("Usted ya tiene un turno!",null,{duration:5e3}),this.router.navigate(["/public/screen"])):this.ticketsService.companyData?this.ticketsService.readSkills(this.ticketsService.companyData._id).subscribe(e=>{this.skills=e.skills}):(this.snack.open("Por favor ingrese una empresa primero.",null,{duration:5e3}),this.router.navigate(["/public"]))}nuevoTicket(e,t){this.loading=!0,this.ticketsService.nuevoTicket(this.ticketsService.companyData._id,e,t,this.wsService.idSocket).subscribe(e=>{e.ok&&(localStorage.setItem("ticket",JSON.stringify(e.ticket)),this.ticketsService.myTicket=e.ticket,this.loading=!1,this.router.navigate(["/public/screen"]))})}salir(){localStorage.getItem("company")&&localStorage.removeItem("company"),this.router.navigate(["/public"])}}return e.\u0275fac=function(t){return new(t||e)(o.Lb(s.a),o.Lb(b.a),o.Lb(r.b),o.Lb(a.a))},e.\u0275cmp=o.Fb({type:e,selectors:[["app-tickets"]],decls:6,vars:1,consts:[[1,"turno-container","p-4",2,"text-align","-webkit-center"],[1,"card","bg-light","mb-3",2,"min-width","18rem","max-width","30rem"],[1,"card-header"],[1,"card-body"],[4,"ngIf"],["class","card-title",4,"ngIf"],["class","btn btn-primary btn-block btn-lg",3,"click",4,"ngFor","ngForOf"],[1,"btn","btn-danger","btn-block","btn-lg",3,"click"],[1,"card-title"],["id","lblNuevoTicket"],[1,"lead"],[1,"card","border-success","py-4","my-4"],[1,"text-company"],[2,"color","darkblue","font-size","1rem","font-weight","400"],[1,"btn","btn-primary","btn-block","btn-lg",3,"click"]],template:function(e,t){1&e&&(o.Qb(0,"div",0),o.Qb(1,"div",1),o.Qb(2,"div",2),o.rc(3,"OBTENER TURNO"),o.Pb(),o.Qb(4,"div",3),o.qc(5,p,6,3,"div",4),o.Pb(),o.Pb(),o.Pb()),2&e&&(o.zb(5),o.ec("ngIf",t.ticketsService.companyData))},directives:[i.j,i.i],styles:[".turno-container[_ngcontent-%COMP%]{max-width:100%;height:100%;justify-content:center;text-align:center;background-color:#fff}"]}),e})();var k=c("qfBg"),v=c("Tj54");function g(e,t){1&e&&(o.Qb(0,"div",3),o.Qb(1,"div",4),o.rc(2,"TURNO FINALIZADO "),o.Pb(),o.Qb(3,"div",5),o.Qb(4,"div",13),o.Qb(5,"div",14),o.rc(6,"Su turno ha finalizado"),o.Pb(),o.Pb(),o.Pb(),o.Pb())}function f(e,t){if(1&e&&(o.Qb(0,"div"),o.Qb(1,"span",15),o.rc(2),o.Pb(),o.Pb()),2&e){const e=o.Zb();o.zb(2),o.uc(" ",null==e.ticketsService.lastTicket?null:e.ticketsService.lastTicket.cd_skill," ",null==e.ticketsService.lastTicket?null:e.ticketsService.lastTicket.id_ticket," ")}}function y(e,t){if(1&e&&(o.Qb(0,"div"),o.Qb(1,"span",15),o.rc(2),o.Pb(),o.Pb()),2&e){const e=o.Zb();o.zb(2),o.uc(" ",null==e.ticketsService.myTicket?null:e.ticketsService.myTicket.cd_skill," ",null==e.ticketsService.myTicket?null:e.ticketsService.myTicket.id_ticket," ")}}function h(e,t){if(1&e&&(o.Qb(0,"div",16),o.Qb(1,"div",17),o.Qb(2,"div",18),o.rc(3," Por favor pase por el escritorio "),o.Pb(),o.Pb(),o.Qb(4,"div",17),o.Qb(5,"div",19),o.rc(6),o.Pb(),o.Pb(),o.Pb()),2&e){const e=o.Zb();o.zb(6),o.tc(" ",null==e.ticketsService.myTicket?null:e.ticketsService.myTicket.cd_desk," ")}}function P(e,t){if(1&e){const e=o.Rb();o.Qb(0,"button",20),o.Xb("click",(function(){return o.kc(e),o.Zb().cancelTicket()})),o.rc(1,"Cancelar Turno"),o.Pb()}}function S(e,t){if(1&e){const e=o.Rb();o.Qb(0,"button",22),o.Xb("click",(function(){return o.kc(e),o.Zb(2).enCamino()})),o.rc(1,"Estoy en camino"),o.Pb()}}function Q(e,t){if(1&e&&(o.Qb(0,"div"),o.qc(1,S,2,0,"button",21),o.Pb()),2&e){const e=o.Zb();o.zb(1),o.ec("ngIf",!e.coming)}}function T(e,t){1&e&&(o.Qb(0,"div",23),o.Qb(1,"div",24),o.Qb(2,"span"),o.rc(3,"espere..."),o.Pb(),o.Pb(),o.Pb())}function x(e,t){1&e&&(o.Qb(0,"span",31),o.Qb(1,"mat-icon"),o.rc(2,"check"),o.Pb(),o.Pb())}function I(e,t){if(1&e&&(o.Qb(0,"tr"),o.Qb(1,"td",28),o.rc(2),o.Pb(),o.Qb(3,"td",29),o.qc(4,x,3,0,"span",30),o.Pb(),o.Qb(5,"td",28),o.rc(6),o.Pb(),o.Pb()),2&e){const e=t.$implicit;o.zb(2),o.uc(" ",e.cd_skill,"",e.id_ticket,""),o.zb(2),o.ec("ngIf",e.tm_end),o.zb(2),o.sc(e.cd_desk)}}function _(e,t){if(1&e&&(o.Qb(0,"div",25),o.Qb(1,"table",26),o.Qb(2,"tr"),o.Qb(3,"td"),o.rc(4," Turno "),o.Pb(),o.Mb(5,"td"),o.Qb(6,"td"),o.rc(7," Escritorio "),o.Pb(),o.Pb(),o.qc(8,I,7,4,"tr",27),o.Pb(),o.Pb()),2&e){const e=o.Zb();o.zb(8),o.ec("ngForOf",e.ticketsService.ticketsTail)}}let w=(()=>{class e{constructor(e,t,c,i,n){this.wsService=e,this.ticketsService=t,this.userService=c,this.snack=i,this.router=n,this.loading=!1,this.coming=!1,this.publicMode=!1}ngOnInit(){this.coming=!1,document.getElementsByTagName("body")[0].classList.remove("container"),this.userService.usuario||(this.ticketsService.companyData||(this.router.navigate(["/public"]),this.snack.open("Por favor ingrese una empresa primero!",null,{duration:5e3})),this.publicMode=!0),this.ticketsService.getTickets(),console.log(this.ticketsService)}toggle(e){e.toggle()}enCamino(){this.coming=!0,this.wsService.emit("cliente-en-camino",this.ticketsService.myTicket.id_socket_desk)}cancelTicket(){this.snack.open("Desea cancelar el turno?","SI, CANCELAR",{duration:5e3}).afterDismissed().subscribe(e=>{e.dismissedByAction&&this.ticketsService.cancelTicket(this.ticketsService.myTicket._id).subscribe(e=>{e.ok&&(this.snack.open(e.msg,"ACEPTAR",{duration:5e3}),this.ticketsService.clearPublicSession(),this.router.navigate(["/public"]))})})}}return e.\u0275fac=function(t){return new(t||e)(o.Lb(s.a),o.Lb(b.a),o.Lb(k.a),o.Lb(a.a),o.Lb(r.b))},e.\u0275cmp=o.Fb({type:e,selectors:[["app-screen"]],decls:21,vars:9,consts:[[1,"row","p-3"],[1,"col-md-6"],["class","card text-white bg-danger mb-4",4,"ngIf"],[1,"card","text-white","bg-danger","mb-4"],[1,"card-header","banner-title"],[1,"banner-content",2,"background-color","rgb(141, 51, 51)"],[4,"ngIf"],["class","banner-content",4,"ngIf"],[1,"mb-4"],["class","btn btn-danger btn-block btn-lg text-uppercase",3,"click",4,"ngIf"],[1,"card","text-white","bg-primary","mb-4"],["class","rounded d-flex banner-content","style","background-color: rgb(54, 77, 194)",4,"ngIf"],["class","card-body card-tickets-info table-responsive-sm","style","background-color: rgb(54, 77, 194)",4,"ngIf"],[1,"container"],[1,"card","bg-danger","text-white","my-4","py-2"],[1,"xxxxl"],[1,"banner-content"],[1,"row"],[1,"col"],[1,"col","xxxxl"],[1,"btn","btn-danger","btn-block","btn-lg","text-uppercase",3,"click"],["class","btn btn-success btn-block btn-lg text-uppercase",3,"click",4,"ngIf"],[1,"btn","btn-success","btn-block","btn-lg","text-uppercase",3,"click"],[1,"rounded","d-flex","banner-content",2,"background-color","rgb(54, 77, 194)"],[1,"d-flex","justify-content-center","text-white","banner-title",2,"width","100%"],[1,"card-body","card-tickets-info","table-responsive-sm",2,"background-color","rgb(54, 77, 194)"],[1,"table","table","text-white","text-center",2,"font-size","x-large"],[4,"ngFor","ngForOf"],[2,"text-align","center","width","50%"],[2,"padding","0","vertical-align","middle"],["style","color: greenyellow",4,"ngIf"],[2,"color","greenyellow"]],template:function(e,t){1&e&&(o.Qb(0,"div",0),o.Qb(1,"div",1),o.qc(2,g,7,0,"div",2),o.Qb(3,"div",3),o.Qb(4,"div",4),o.rc(5),o.Pb(),o.Qb(6,"div",5),o.qc(7,f,3,2,"div",6),o.qc(8,y,3,2,"div",6),o.qc(9,h,7,1,"div",7),o.Pb(),o.Pb(),o.Qb(10,"div",8),o.qc(11,P,2,0,"button",9),o.Pb(),o.Qb(12,"div",8),o.qc(13,Q,2,1,"div",6),o.Pb(),o.Mb(14,"div"),o.Pb(),o.Qb(15,"div",1),o.Qb(16,"div",10),o.Qb(17,"div",4),o.rc(18,"HISTORIAL DE LLAMADOS"),o.Pb(),o.qc(19,T,4,0,"div",11),o.qc(20,_,9,1,"div",12),o.Pb(),o.Pb(),o.Pb()),2&e&&(o.zb(2),o.ec("ngIf",!t.ticketsService.myTicket&&t.ticketsService.myTicket_end),o.zb(3),o.tc("TURNO ",null==t.ticketsService.myTicket?null:t.ticketsService.myTicket.id_ticket," "),o.zb(2),o.ec("ngIf",!t.publicMode),o.zb(1),o.ec("ngIf",!(null!=t.ticketsService.myTicket&&t.ticketsService.myTicket.id_desk)),o.zb(1),o.ec("ngIf",null==t.ticketsService.myTicket?null:t.ticketsService.myTicket.id_desk),o.zb(2),o.ec("ngIf",t.ticketsService.myTicket),o.zb(2),o.ec("ngIf",null==t.ticketsService.myTicket?null:t.ticketsService.myTicket.id_desk),o.zb(6),o.ec("ngIf",0===t.ticketsService.ticketsTail.length),o.zb(1),o.ec("ngIf",t.ticketsService.ticketsTail.length>0))},directives:[i.j,i.i,v.a],styles:[".example-button-container[_ngcontent-%COMP%]{display:flex;justify-content:right;width:120px}"]}),e})();var z=c("Q2Ze"),C=c("e6WT"),O=c("vrAh"),q=c("UhP/");function L(e,t){if(1&e&&(o.Qb(0,"mat-option",16),o.rc(1),o.Pb()),2&e){const e=t.$implicit;o.ec("value",e),o.zb(1),o.tc(" ",e.tx_company_name," ")}}function A(e,t){if(1&e&&(o.Qb(0,"div"),o.Qb(1,"p",17),o.rc(2," Usted esta por ir hacia la recepci\xf3n de turnos de "),o.Pb(),o.Qb(3,"div",18),o.Qb(4,"p",19),o.rc(5),o.Pb(),o.Qb(6,"p",20),o.rc(7),o.Pb(),o.Pb(),o.Pb()),2&e){const e=o.Zb();o.zb(5),o.tc(" ",e.companySelected.tx_company_name," "),o.zb(2),o.vc(" ",e.companySelected.tx_address_street," ",e.companySelected.tx_address_number," ",e.companySelected.cd_city," ")}}function Z(e,t){if(1&e){const e=o.Rb();o.Qb(0,"div"),o.Qb(1,"button",21),o.Xb("click",(function(){return o.kc(e),o.Zb().goToCompany()})),o.rc(2),o.Pb(),o.Pb()}if(2&e){const e=o.Zb();o.zb(2),o.tc("Ir hacia ",e.companySelected.tx_company_name,"")}}let j=(()=>{class e{constructor(e,t,c){this.router=e,this.ticketsService=t,this.snack=c,this.companies=[]}ngOnInit(){}ngAfterViewInit(){document.getElementById("inputCompany").focus()}findCompany(e){e.value.length>1&&this.ticketsService.findCompany(e.value).subscribe(t=>{t.ok?this.companies=t.companies:(e.value="",this.snack.open("No existen resultados.",null,{duration:1e3}))},()=>{this.snack.open("Ocurrio un error al buscar la empresa",null,{duration:2e3})})}goToCompany(){this.companySelected&&this.router.navigate(["/public/",this.companySelected.tx_public_name])}setCompany(e){this.companySelected=e}}return e.\u0275fac=function(t){return new(t||e)(o.Lb(r.b),o.Lb(b.a),o.Lb(a.a))},e.\u0275cmp=o.Fb({type:e,selectors:[["app-search"]],decls:24,vars:5,consts:[[1,"turno-container","p-2",2,"text-align","-webkit-center"],[1,"card","bg-light","mb-3",2,"min-width","18rem","max-width","30rem"],[1,"jumbotron","m-2"],[1,"display-4"],[1,"p-3",2,"background-color","whitesmoke","border-radius",".2rem"],[1,"my-4"],[1,"my-2"],["color","warn","appearance","fill","logincss","",1,"w-100"],["id","inputCompany","matInput","","placeholder","Empresa S.A.",3,"matAutocomplete","value","keyup"],["inputCompany",""],[1,"input-icon"],[1,"mdi","mdi-close"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],[1,"lead"],[1,"card","border-success","py-4","my-4"],[1,"text-company"],[2,"color","darkblue","font-size","1rem","font-weight","400"],[1,"btn","btn-success","btn-lg","btn-block",3,"click"]],template:function(e,t){if(1&e){const e=o.Rb();o.Qb(0,"div",0),o.Qb(1,"div",1),o.Qb(2,"div",2),o.Qb(3,"h1",3),o.rc(4,"Ingrese la empresa"),o.Pb(),o.Qb(5,"p",4),o.rc(6," Puede utilizar el buscador o ingresar directamente a la empresa ingresando a su web p\xfablica por ejemplo:"),o.Mb(7,"br"),o.Qb(8,"b"),o.rc(9,"webturnos.herokuapp.com/public/suempresa"),o.Pb(),o.Pb(),o.Mb(10,"hr",5),o.Qb(11,"div",6),o.Qb(12,"mat-form-field",7),o.Qb(13,"mat-label"),o.rc(14,"Ingrese la empresa"),o.Pb(),o.Qb(15,"input",8,9),o.Xb("keyup",(function(){o.kc(e);const c=o.jc(16);return t.findCompany(c)})),o.Pb(),o.Qb(17,"span",10),o.Mb(18,"i",11),o.Pb(),o.Pb(),o.Qb(19,"mat-autocomplete",12,13),o.Xb("optionSelected",(function(e){return t.setCompany(e.option.value)})),o.qc(21,L,2,2,"mat-option",14),o.Pb(),o.Pb(),o.qc(22,A,8,4,"div",15),o.qc(23,Z,3,1,"div",15),o.Pb(),o.Pb(),o.Pb()}if(2&e){const e=o.jc(20);o.zb(15),o.ec("matAutocomplete",e)("value",null==t.companySelected?null:t.companySelected.tx_company_name),o.zb(6),o.ec("ngForOf",t.companies),o.zb(1),o.ec("ngIf",t.companySelected),o.zb(1),o.ec("ngIf",t.companySelected)}},directives:[z.b,z.e,C.a,O.c,O.a,i.i,i.j,q.h],styles:[""]}),e})();var D=c("AIE+");const F=[{path:"tickets",component:m},{path:"screen",component:w},{path:"",component:j},{path:":userCompanyName",component:c("R44i").a},{path:"**",component:D.a}];let R=(()=>{class e{}return e.\u0275mod=o.Jb({type:e}),e.\u0275inj=o.Ib({factory:function(t){return new(t||e)},imports:[[r.e.forChild(F)],r.e]}),e})();var E=c("1+r1"),M=c("j1ZV");let N=(()=>{class e{}return e.\u0275mod=o.Jb({type:e}),e.\u0275inj=o.Ib({factory:function(t){return new(t||e)},imports:[[i.b,n.o,n.g,E.a,M.a,R]]}),e})()}}]);