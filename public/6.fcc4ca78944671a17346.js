(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"g8g/":function(t,e,i){"use strict";i.r(e),i.d(e,"PublicoModule",(function(){return j}));var c=i("SVse"),n=i("s7LF"),r=i("iInd"),s=i("8Y7J"),o=i("Gyf/"),b=i("TGE+"),a=i("zHaW");function l(t,e){1&t&&(s.Qb(0,"h5",8),s.Qb(1,"span",9),s.rc(2," Cargando... "),s.Pb(),s.Pb())}function d(t,e){if(1&t&&(s.Qb(0,"div"),s.Qb(1,"p",10),s.rc(2," Usted esta por sacar un turno para ser atendido en "),s.Pb(),s.Qb(3,"div",11),s.Qb(4,"p",12),s.rc(5),s.Pb(),s.Qb(6,"p",13),s.rc(7),s.Pb(),s.Pb(),s.Pb()),2&t){const t=s.Zb(2);s.zb(5),s.tc(" ",t.ticketsService.companyData.tx_company_name," "),s.zb(2),s.vc(" ",t.ticketsService.companyData.tx_address_street," ",t.ticketsService.companyData.tx_address_number," ",t.ticketsService.companyData.cd_city," ")}}function u(t,e){if(1&t){const t=s.Rb();s.Qb(0,"button",14),s.Xb("click",(function(){s.kc(t);const i=e.$implicit;return s.Zb(2).nuevoTicket(i._id,i.cd_skill)})),s.rc(1),s.Pb()}if(2&t){const t=e.$implicit;s.zb(1),s.tc(" ",t.tx_skill," ")}}function k(t,e){if(1&t){const t=s.Rb();s.Qb(0,"div"),s.qc(1,l,3,0,"h5",5),s.qc(2,d,8,4,"div",4),s.qc(3,u,2,1,"button",6),s.Qb(4,"button",7),s.Xb("click",(function(){return s.kc(t),s.Zb().salir()})),s.rc(5,"Salir"),s.Pb(),s.Pb()}if(2&t){const t=s.Zb();s.zb(1),s.ec("ngIf",t.loading),s.zb(1),s.ec("ngIf",!t.loading),s.zb(1),s.ec("ngForOf",t.skills)}}let m=(()=>{class t{constructor(t,e,i,c){this.wsService=t,this.ticketsService=e,this.router=i,this.snack=c,this.loading=!1}ngOnInit(){this.ticketsService.myTicket?(this.snack.open("Usted ya tiene un turno!",null,{duration:5e3}),this.router.navigate(["/publico/pantalla"])):this.ticketsService.companyData?this.ticketsService.readSkills(this.ticketsService.companyData._id).subscribe(t=>{this.skills=t.skills}):(this.snack.open("Por favor ingrese una empresa primero.",null,{duration:5e3}),this.router.navigate(["/publico"]))}nuevoTicket(t,e){this.loading=!0,this.ticketsService.nuevoTicket(this.ticketsService.companyData._id,t,e,this.wsService.idSocket).subscribe(t=>{t.ok&&(localStorage.setItem("ticket",JSON.stringify(t.ticket)),this.ticketsService.myTicket=t.ticket,this.loading=!1,this.router.navigate(["/publico/pantalla"]))})}salir(){localStorage.getItem("company")&&localStorage.removeItem("company"),this.router.navigate(["/publico"])}}return t.\u0275fac=function(e){return new(e||t)(s.Lb(o.a),s.Lb(b.a),s.Lb(r.b),s.Lb(a.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-turnos"]],decls:6,vars:1,consts:[[1,"turno-container","p-4",2,"text-align","-webkit-center"],[1,"card","bg-light","mb-3",2,"min-width","18rem","max-width","30rem"],[1,"card-header"],[1,"card-body"],[4,"ngIf"],["class","card-title",4,"ngIf"],["class","btn btn-primary btn-block btn-lg",3,"click",4,"ngFor","ngForOf"],[1,"btn","btn-danger","btn-block","btn-lg",3,"click"],[1,"card-title"],["id","lblNuevoTicket"],[1,"lead"],[1,"card","border-success","py-4","my-4"],[1,"text-company"],[2,"color","darkblue","font-size","1rem","font-weight","400"],[1,"btn","btn-primary","btn-block","btn-lg",3,"click"]],template:function(t,e){1&t&&(s.Qb(0,"div",0),s.Qb(1,"div",1),s.Qb(2,"div",2),s.rc(3,"OBTENER TURNO"),s.Pb(),s.Qb(4,"div",3),s.qc(5,k,6,3,"div",4),s.Pb(),s.Pb(),s.Pb()),2&t&&(s.zb(5),s.ec("ngIf",e.ticketsService.companyData))},directives:[c.j,c.i],styles:[".turno-container[_ngcontent-%COMP%]{max-width:100%;height:100%;justify-content:center;text-align:center;background-color:#fff}.text-company[_ngcontent-%COMP%]{color:#8b0000;font-size:2.5rem;line-height:2rem;font-weight:400}"]}),t})();var p=i("qfBg");function v(t,e){1&t&&(s.Qb(0,"div",3),s.Qb(1,"div",4),s.rc(2,"TURNO FINALIZADO "),s.Pb(),s.Qb(3,"div",5),s.Qb(4,"div",16),s.Qb(5,"div",17),s.rc(6,"Su turno ha finalizado"),s.Pb(),s.Pb(),s.Pb(),s.Pb())}function g(t,e){if(1&t&&(s.Qb(0,"div"),s.Qb(1,"span",18),s.rc(2),s.Pb(),s.Pb()),2&t){const t=s.Zb();s.zb(2),s.uc(" ",null==t.ticketsService.myTicket?null:t.ticketsService.myTicket.cd_skill," ",null==t.ticketsService.myTicket?null:t.ticketsService.myTicket.id_ticket," ")}}function f(t,e){if(1&t){const t=s.Rb();s.Qb(0,"div",20),s.Qb(1,"div",21),s.Qb(2,"button",24),s.Xb("click",(function(){return s.kc(t),s.Zb(2).enCamino()})),s.rc(3,"Estoy en camino!"),s.Pb(),s.Pb(),s.Pb()}}function h(t,e){if(1&t&&(s.Qb(0,"div",19),s.Qb(1,"div",20),s.Qb(2,"div",21),s.rc(3," Por favor pase por el escritorio "),s.Pb(),s.Pb(),s.Qb(4,"div",20),s.Qb(5,"div",22),s.rc(6),s.Pb(),s.Pb(),s.qc(7,f,4,0,"div",23),s.Pb()),2&t){const t=s.Zb();s.zb(6),s.tc(" ",null==t.ticketsService.myTicket?null:t.ticketsService.myTicket.cd_desk," "),s.zb(1),s.ec("ngIf",!t.coming)}}function y(t,e){if(1&t){const t=s.Rb();s.Qb(0,"button",25),s.Xb("click",(function(){return s.kc(t),s.Zb().cancelTicket()})),s.rc(1,"Cancelar Turno"),s.Pb()}}function P(t,e){1&t&&(s.Qb(0,"div",26),s.Qb(1,"div",27),s.Qb(2,"span"),s.rc(3,"espere..."),s.Pb(),s.Pb(),s.Pb())}function Q(t,e){if(1&t&&(s.Qb(0,"span"),s.rc(1),s.Pb()),2&t){const t=s.Zb().$implicit;s.zb(1),s.uc("",t.cd_skill,"",t.id_ticket,"")}}function S(t,e){if(1&t&&(s.Qb(0,"span"),s.rc(1),s.Pb()),2&t){const t=s.Zb().$implicit;s.zb(1),s.sc(t.id_desk)}}function w(t,e){if(1&t&&(s.Qb(0,"div",30),s.Qb(1,"div",12),s.qc(2,Q,2,2,"span",6),s.Pb(),s.Qb(3,"div",12),s.qc(4,S,2,1,"span",6),s.Pb(),s.Pb()),2&t){const t=s.Zb(2);s.zb(2),s.ec("ngIf",t.ticketsService.ticketsTail),s.zb(2),s.ec("ngIf",t.ticketsService.ticketsTail)}}function T(t,e){if(1&t&&(s.Qb(0,"div",28),s.qc(1,w,5,2,"div",29),s.Pb()),2&t){const t=s.Zb();s.zb(1),s.ec("ngForOf",t.ticketsService.ticketsTail)}}let x=(()=>{class t{constructor(t,e,i,c,n){this.wsService=t,this.ticketsService=e,this.userService=i,this.snack=c,this.router=n,this.loading=!1,this.coming=!1}ngOnInit(){this.coming=!1,document.getElementsByTagName("body")[0].classList.remove("container"),this.userService.usuario||this.ticketsService.companyData||(this.ticketsService.getTickets(),this.router.navigate(["/publico"]),this.snack.open("Por favor ingrese una empresa primero!",null,{duration:5e3}))}toggle(t){t.toggle()}enCamino(){this.coming=!0,this.wsService.emit("cliente-en-camino",this.ticketsService.myTicket.id_socket_desk)}cancelTicket(){this.snack.open("Desea cancelar el turno?","SI, CANCELAR",{duration:5e3}).afterDismissed().subscribe(t=>{t.dismissedByAction&&this.ticketsService.cancelTicket(this.ticketsService.myTicket._id).subscribe(t=>{t.ok&&(this.snack.open(t.msg,"ACEPTAR",{duration:5e3}),this.ticketsService.clearPublicSession(),this.router.navigate(["/publico"]))})})}}return t.\u0275fac=function(e){return new(e||t)(s.Lb(o.a),s.Lb(b.a),s.Lb(p.a),s.Lb(a.a),s.Lb(r.b))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-pantalla"]],decls:23,vars:7,consts:[[1,"row","p-3"],[1,"col-md-6"],["class","card text-white bg-danger mb-4",4,"ngIf"],[1,"card","text-white","bg-danger","mb-4"],[1,"card-header","banner-title"],[1,"banner-content",2,"background-color","rgb(141, 51, 51)"],[4,"ngIf"],["class","banner-content",4,"ngIf"],[1,"mb-4"],["class","btn btn-danger btn-lg text-uppercase",3,"click",4,"ngIf"],[1,"card","text-white","bg-primary","mb-4"],[1,"card-text","d-flex","banner-subtitle"],[1,"d-flex","justify-content-center","text-white",2,"width","50%"],[1,"d-flex","justify-content-center","ticket-secundario-escritorio","text-white",2,"width","50%"],["class","rounded d-flex banner-content","style","background-color: rgb(54, 77, 194)",4,"ngIf"],["class","rounded banner-content","style","background-color: rgb(54, 77, 194)",4,"ngIf"],[1,"container"],[1,"card","bg-danger","text-white","my-4","py-2"],[1,"xxxxl"],[1,"banner-content"],[1,"row"],[1,"col"],[1,"col","xxxxl"],["class","row",4,"ngIf"],[1,"btn","btn-primary","btn-lg",3,"click"],[1,"btn","btn-danger","btn-lg","text-uppercase",3,"click"],[1,"rounded","d-flex","banner-content",2,"background-color","rgb(54, 77, 194)"],[1,"d-flex","justify-content-center","text-white","banner-title",2,"width","100%"],[1,"rounded","banner-content",2,"background-color","rgb(54, 77, 194)"],["class","d-flex",4,"ngFor","ngForOf"],[1,"d-flex"]],template:function(t,e){1&t&&(s.Qb(0,"div",0),s.Qb(1,"div",1),s.qc(2,v,7,0,"div",2),s.Qb(3,"div",3),s.Qb(4,"div",4),s.rc(5),s.Pb(),s.Qb(6,"div",5),s.qc(7,g,3,2,"div",6),s.qc(8,h,8,2,"div",7),s.Pb(),s.Pb(),s.Qb(9,"div",8),s.qc(10,y,2,0,"button",9),s.Pb(),s.Mb(11,"div"),s.Pb(),s.Qb(12,"div",1),s.Qb(13,"div",10),s.Qb(14,"div",4),s.rc(15,"HISTORIAL DE LLAMADOS"),s.Pb(),s.Qb(16,"div",11),s.Qb(17,"div",12),s.rc(18," Turno "),s.Pb(),s.Qb(19,"div",13),s.rc(20," Escritorio "),s.Pb(),s.Pb(),s.qc(21,P,4,0,"div",14),s.qc(22,T,2,1,"div",15),s.Pb(),s.Pb(),s.Pb()),2&t&&(s.zb(2),s.ec("ngIf",!e.ticketsService.myTicket&&e.ticketsService.myTicket_end),s.zb(3),s.tc("TURNO ",null==e.ticketsService.myTicket?null:e.ticketsService.myTicket.id_ticket," "),s.zb(2),s.ec("ngIf",!(null!=e.ticketsService.myTicket&&e.ticketsService.myTicket.id_desk)),s.zb(1),s.ec("ngIf",null==e.ticketsService.myTicket?null:e.ticketsService.myTicket.id_desk),s.zb(2),s.ec("ngIf",e.ticketsService.myTicket),s.zb(11),s.ec("ngIf",0===e.ticketsService.ticketsTail.length),s.zb(1),s.ec("ngIf",e.ticketsService.ticketsTail.length>0))},directives:[c.j,c.i],styles:[".example-button-container[_ngcontent-%COMP%]{display:flex;justify-content:right;width:120px}"]}),t})();var I=i("Q2Ze"),_=i("e6WT");let z=(()=>{class t{constructor(t){this.router=t}ngOnInit(){}ngAfterViewInit(){document.getElementById("inputCompany").focus()}findCompany(t){t.value.length>0&&this.router.navigate(["/publico",t.value])}}return t.\u0275fac=function(e){return new(e||t)(s.Lb(r.b))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-home-publico"]],decls:21,vars:0,consts:[[1,"turno-container","p-4",2,"text-align","-webkit-center"],[1,"card","bg-light","mb-3",2,"min-width","18rem","max-width","30rem"],[1,"jumbotron","m-2"],[1,"display-4"],[1,"p-2",2,"background-color","whitesmoke","border-radius",".2rem"],[1,"my-4"],[1,"my-2"],["color","warn","appearance","fill","logincss","",1,"w-100"],["id","inputCompany","matInput","","placeholder","Empresa S.A.",3,"keydown.enter"],["inputCompany",""],[1,"input-icon"],[1,"mdi","mdi-close"],[1,"btn","btn-success",3,"click"]],template:function(t,e){if(1&t){const t=s.Rb();s.Qb(0,"div",0),s.Qb(1,"div",1),s.Qb(2,"div",2),s.Qb(3,"h1",3),s.rc(4,"Ingrese la empresa"),s.Pb(),s.Qb(5,"p",4),s.rc(6,"Puede utilizar el buscador o ingresar directamente a la empresa ingresando a su web p\xfablica por ejemplo:"),s.Mb(7,"br"),s.Qb(8,"b"),s.rc(9,"webturnos.herokuapp.com/laempresa"),s.Pb(),s.Pb(),s.Mb(10,"hr",5),s.Qb(11,"div",6),s.Qb(12,"mat-form-field",7),s.Qb(13,"mat-label"),s.rc(14,"Ingrese la empresa"),s.Pb(),s.Qb(15,"input",8,9),s.Xb("keydown.enter",(function(){s.kc(t);const i=s.jc(16);return e.findCompany(i)})),s.Pb(),s.Qb(17,"span",10),s.Mb(18,"i",11),s.Pb(),s.Pb(),s.Pb(),s.Qb(19,"button",12),s.Xb("click",(function(){s.kc(t);const i=s.jc(16);return e.findCompany(i)})),s.rc(20,"Buscar"),s.Pb(),s.Pb(),s.Pb(),s.Pb()}},directives:[I.b,I.e,_.a],styles:[""]}),t})();var C=i("AIE+");const O=[{path:"turnos",component:m},{path:"pantalla",component:x},{path:"",component:z},{path:":userCompanyName",component:i("KmiR").a},{path:"**",component:C.a}];let L=(()=>{class t{}return t.\u0275mod=s.Jb({type:t}),t.\u0275inj=s.Ib({factory:function(e){return new(e||t)},imports:[[r.e.forChild(O)],r.e]}),t})();var q=i("1+r1"),Z=i("j1ZV");let j=(()=>{class t{}return t.\u0275mod=s.Jb({type:t}),t.\u0275inj=s.Ib({factory:function(e){return new(e||t)},imports:[[c.b,n.o,n.g,q.a,Z.a,L]]}),t})()}}]);